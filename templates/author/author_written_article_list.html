{% extends 'base.html' %} {% load static %} {% load only_hours %} {% block title %} All Articles {% endblock title %} {% block stylesheets %} {{ block.super }}
{% endblock stylesheets %} {% block content %}			

<div class="w-full container mx-auto pt-20">
	<div class="flex flex-col items-center py-12">
		<span class="font-bold text-gray-800 uppercase hover:text-gray-700 text-5xl">Written Articles</span>
		<p class="text-lg text-gray-600">List of all your written articles.</p>
	</div>
</div>

<div class="container mx-auto w-full sm:px-6">
	<div class="px-4 md:px-10 py-4 md:py-7 bg-gray-100 dark:bg-gray-700 rounded-tl-lg rounded-tr-lg">
		<div class="sm:flex items-center justify-between">
			<p tabindex="0" class="focus:outline-none text-base sm:text-lg md:text-xl lg:text-2xl font-bold leading-normal text-gray-800 dark:text-white ">List Of Written Articles</p>
			<div>
				<button class="focus:ring-2 focus:ring-offset-2 focus:ring-indigo-600 inline-flex sm:ml-3 mt-4 sm:mt-0 items-start justify-start px-6 py-3 bg-indigo-700 hover:bg-indigo-600 focus:outline-none rounded">
					<p class="text-sm font-medium leading-none text-white">New Project</p>
				</button>
			</div>
		</div>
	</div>
	{% if written_articles_list %}
	<div class="bg-white dark:bg-gray-800  shadow px-4 md:px-10 pt-4 md:pt-7 pb-5 overflow-y-auto">
		<table class="w-full whitespace-nowrap">
			<thead>
				<tr tabindex="0" class="focus:outline-none h-16 w-full text-sm leading-none text-gray-800 dark:text-white ">
					<th class="font-bold text-left pl-4">Title</th>
					<th class="font-bold text-left pl-12">Created</th>
					<th class="font-bold text-left pl-12">Status</th>
					<th class="font-bold text-left pl-20">Words</th>
					<th class="font-bold text-left pl-20">Time read</th>
				</tr>
			</thead>
			<tbody class="w-full">
				{% for article in written_articles_list %}
				<tr tabindex="0" class="focus:outline-none h-20 text-sm leading-none text-gray-800 dark:text-white  bg-white dark:bg-gray-800  hover:bg-gray-100 dark:hover:bg-gray-900  border-b border-t border-gray-100 dark:border-gray-700 ">
					<td class="pl-4 cursor-pointer">
						<div class="flex items-center">
							<div class="w-10 h-10">
								<img class="w-full h-full" src="{{ article.featured_image_url }}" alt="UX Design and Visual Strategy" />
							</div>
							<div class="pl-4">
								<p class="font-medium"><a href="{{ article.get_absolute_url }}">{{ article.title }}</a></p>
							</div>
						</div>
					</td>
					<td class="pl-12">
						<p class="font-medium leading-none text-gray-800 dark:text-white "> {{ article.date_created|timesince|upto:',' }} ago</p>
					</td>
					<td class="pl-12">
						<p class="font-medium {% if article.status == "published"%} text-success {% endif %}{% if article.status == "drafted" %} text-primary {% endif %}">{{ article.status }}</p>
					</td>
					<td class="pl-20">
						<p class="font-medium">{{ article.count_words }} word{{ article.count_words|pluralize }}</p>
					</td>
					<td class="pl-20">
						<p class="font-medium">{{ article.read_time }} min{{ article.read_time|pluralize }} read</p>
					</td>
					<td class="px-7 2xl:px-0">
						<button onclick="dropdownFunction(this)" class="w-5 focus:ring-2 rounded-md focus:outline-none ml-7" role="button" aria-label="options">
						   <img class="w-5" src="https://tuk-cdn.s3.amazonaws.com/can-uploader/table_3-svg1.svg" alt="dropdown">
						</button>
						<div class="dropdown-content bg-white dark:bg-gray-800  shadow w-24 absolute z-30 right-0 mr-6 hidden">
							<div tabindex="0" class="focus:outline-none focus:text-indigo-600 text-xs w-full hover:bg-indigo-700 py-4 px-4 cursor-pointer hover:text-white">
								<p><a href="{% url 'article_update' slug=article.slug %}">Edit Article</a></p>
							</div>
							<div tabindex="0" class="focus:outline-none focus:text-indigo-600 text-xs w-full hover:bg-indigo-700 py-4 px-4 cursor-pointer hover:text-white">
								<p><a href="{% url 'article_delete' slug=article.slug %}">Delete Article</a></p>
							</div>
						</div>
					</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
	{% else %}
	<center>
		<div class="alert alert-info"><b>No Written Articles</b></div>
	</center>
	{% endif %}
</div>



{# Pagination for article post #}
<nav aria-label="Page navigation example">
	{% if written_articles_list.has_other_pages %}
	<ul class="pagination justify-content-center">
		{% if written_articles_list.has_previous %}
		<li class="badge badge-pill badge-secondary">
			<a class="badge text-white" href="?page={{ written_articles_list.previous_page_number }}" tabindex="-1">Previous</a>
		</li>
		{% else %}
		<li class="badge badge-pill badge-secondary disabled">
			<span class="badge badge-pill badge-secondary">Previous</span>
		</li>
		{% endif %} {% for i in written_articles_list.paginator.page_range %} {% if written_articles_list.number == i %}
		<li class="page-item active">
			<span class="page-link">
				{{ i }}
				<span class="sr-only">(current)</span>
			</span>
		</li>
		{% else %}
		<li class="page-item">
			<a class="page-link" href="?page={{ i }}">{{ i }}</a>
		</li>
		{% endif %} {% endfor %} {% if written_articles_list.has_next %}
		<li class="badge badge-pill badge-secondary">
			<a class="badge text-white" href="?page={{ written_articles_list.next_page_number }}">Next</a>
		</li>
		{% else %}
		<li class="badge badge-pill badge-secondary disabled">
			<span class="badge badge-pill badge-secondary">Next</span>
		</li>
		{% endif %}
	</ul>
	{% endif %}
</nav>


<script>
	function dropdownFunction(element) {
		var dropdowns = document.getElementsByClassName("dropdown-content");
		var i;
		let list = element.parentElement.parentElement.getElementsByClassName("dropdown-content")[0];
		list.classList.add("target");
		for (i = 0; i < dropdowns.length; i++) {
			if (!dropdowns[i].classList.contains("target")) {
				dropdowns[i].classList.add("hidden");
			}
		}
		list.classList.toggle("hidden");
	}
</script>

{% endblock content %}
